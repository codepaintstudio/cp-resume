import{j as S,r as l,u as M,q as _,k as n,l as o,p as u,s as N,x as d,z as j,M as h,F as D,N as R,A as c,v,T as b,L as $}from"./vendor-BQcZEzZR.js";import{_ as B}from"./CvCard.vue_vue_type_script_setup_true_lang-D5KWr1zD.js";import{u as V,g as z,s as f,a as U,d as F}from"./index-D-9_l-Mc.js";const P={class:"flex justify-between items-center w-[100%] h-1/8 px-6 border-b-2 border-[#D9D9D9]"},q={class:"text-lg font-semibold"},A={class:"flex flex-wrap space-x-6 space-y-5 border-gray-300 px-10 pt-4 h-7/8 no-scrollbar overflow-scroll"},E=["onMouseenter"],H={key:0,class:"absolute h-full inset-0 rounded-lg bg-black opacity-50"},G={key:0,class:"absolute inset-0 rounded-lg flex flex-col justify-center items-center space-y-2"},J=["onClick"],K={key:0,class:"w-63 h-90 flex items-center justify-center bg-gray-200 rounded cursor-pointer hover:bg-gray-300 transition-all duration-300"},Y=S({__name:"UserCv",setup(O){const i=V(),s=l([]),r=l(!0),x=l(1),k=l(1e4);M(()=>{w()});const w=async()=>{try{const t=await z(x.value,k.value);s.value=t.data.items,s.value=s.value.filter(e=>String(e.resumeUserId)===i.userId),i.userCvTotal=s.value.length,r.value=!1}catch{r.value=!1,f({type:"error",message:"获取简历列表失败"})}},C=async t=>{r.value=!0;try{await F(t),s.value=s.value.filter(e=>e.resumeId!==t),r.value=!1,f({type:"success",message:"删除简历成功"})}catch{r.value=!1,f({type:"error",message:"删除简历失败"})}};async function I(t){try{await U({message:"确定要删除这份记录简历？"}),await C(t)}catch{console.log("用户取消了操作")}}const m=l(null),p=t=>{m.value=t},T=(t,e)=>({resumeTemplateName:t,resumeTemplateContent:{folderPath:"",thumbnail:e,style:"风格",industry:"行业",color:"颜色"}});return(t,e)=>{const L=_("LoadingSpinner"),g=_("RouterLink");return o(),n("div",null,[u("div",P,[u("h2",q,"我的云简历 ("+j(h(i).userCvTotal)+"/10)",1)]),r.value?(o(),N(L,{key:0})):d("",!0),u("div",A,[(o(!0),n(D,null,R(s.value,a=>(o(),n("div",{key:a.resumeId,class:"relative h-90 cursor-pointer rounded-lg",onMouseenter:y=>p(a.resumeId),onMouseleave:e[0]||(e[0]=y=>p(null))},[c(B,{"is-view":!1,size:"0.9","cv-template":T(a.resumeContent.resumeTemplateName)},null,8,["cv-template"]),c(b,{name:"fade-op"},{default:v(()=>[m.value===a.resumeId?(o(),n("div",H)):d("",!0)]),_:2},1024),c(b,{name:"fade-op1"},{default:v(()=>[m.value===a.resumeId?(o(),n("div",G,[c(g,{target:"_blank",to:`/edit/resume-${a.resumeId}`,class:"px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white rounded"},{default:v(()=>e[1]||(e[1]=[$("编辑")])),_:2},1032,["to"]),u("button",{onClick:y=>I(a.resumeId),class:"px-4 py-2 bg-white hover:bg-gray-200 text-black rounded"},"删除",8,J)])):d("",!0)]),_:2},1024)],40,E))),128)),h(i).userCvTotal<=10?(o(),n("div",K,[c(g,{class:"block flex items-center justify-center w-full h-full",to:"/cv"},{default:v(()=>e[2]||(e[2]=[u("span",{class:"text-4xl text-gray-500"},"+",-1)])),_:1})])):d("",!0)])])}}});export{Y as default};
