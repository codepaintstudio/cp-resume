import{d as z,r as a,o as Z,c as d,b as e,i as T,e as c,F as R,p as K,f as P,T as D,t as p,v as n,z as r,s as $,m as i}from"./index-DXLgdIXG.js";import{g as q,d as B,u as E,c as Q}from"./resumeTemplate-CVnry7_7.js";import{_ as k}from"./SingleSelect.vue_vue_type_script_setup_true_lang-BFR0tsBI.js";import"./request-CJO_eqG9.js";const A={class:"p-6 bg-white rounded-lg min-h-[500px]"},H={class:"w-full border-collapse border border-gray-300"},J={class:"p-3 border border-gray-300"},X={class:"p-3 border border-gray-300"},Y={class:"p-3 border border-gray-300"},_={class:"p-3 border border-gray-300"},G={class:"p-3 border border-gray-300"},W={class:"p-3 border border-gray-300"},ee=["onClick"],le=["onClick"],te={key:0,class:"fixed z-20 w-280 h-170 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white shadow-[0px_0px_15px_-5px] p-3 rounded-sm"},oe={class:"text-lg font-semibold mb-4"},se={class:"flex space-x-30"},ae={class:"flex space-x-30 mt-10"},ne={class:"mt-5 flex justify-center items-center space-x-30"},re=["src"],ue={key:1,class:"text-gray-400 text-4xl font-bold"},de={class:"mt-10"},ie={class:"grid grid-cols-3 gap-y-5 gap-x-3"},me={class:"flex items-center"},pe={class:"flex items-center"},be={class:"mt-10"},xe=z({__name:"CvAdmin",setup(fe){const y=a([]),w=a(1),V=a(10),h=a(0),S=[{label:"经典",value:"classical"},{label:"双栏",value:"doubly"}],U=[{value:"",label:"默认"},{value:"zql",label:"ZQL"},{value:"SimSun",label:"宋体"},{value:"KaiTi",label:"楷体"},{value:"ZCOOLKuaiLe-Regular",label:"ZCOOLKuaiLe-Regular"},{value:"ZhiMangXing-Regular",label:"ZhiMangXing-Regular"},{value:"ZCOOL QingKe HuangYou",label:"ZCOOL QingKe HuangYou"}],m=a(!1),f=a(""),b=a(!1),u=a(""),v=a(null),x=a(null),L=()=>{var s;(s=x.value)==null||s.click()},O=s=>{const l=s.target.files;l&&l[0]&&(v.value=l[0],u.value=URL.createObjectURL(v.value))},t=a({resumeTemplateId:"",resumeTemplateName:"",resumeTemplateContent:{description:"",folderPath:"",thumbnail:"",layout:"classical",style:"简约",industry:"互联网",color:"蓝色",setting:{themeColor:"#2b7fff",fontColor:"#ffffff",fontFamily:"zql",lineSpacing:"21",blockSpacing:"21",pageMargin:"21"}}}),g=async()=>{try{const s=await q(w.value,V.value);y.value=s.data.items,h.value=s.data.total}catch{alert("获取模板列表失败")}},N=()=>{b.value=!1,f.value="新增模板",m.value=!0,u.value="",v.value=null,t.value={resumeTemplateId:"",resumeTemplateName:"",resumeTemplateContent:{description:"",folderPath:"",thumbnail:"",layout:"classical",style:"简约",industry:"互联网",color:"蓝色",setting:{themeColor:"#2b7fff",fontColor:"#ffffff",fontFamily:"zql",lineSpacing:"21",blockSpacing:"21",pageMargin:"21"}}}},M=s=>{b.value=!0,f.value="编辑模板",m.value=!0,t.value=JSON.parse(JSON.stringify(s)),u.value=t.value.resumeTemplateContent.thumbnail},F=async s=>{if(confirm("确认删除该模板吗？"))try{await B(s),alert("删除成功"),g()}catch{alert("删除失败")}},I=async()=>{try{b.value?(u.value!==t.value.resumeTemplateContent.thumbnail&&(t.value.resumeTemplateContent.thumbnail=u.value),await E(t.value.resumeTemplateId,t.value.resumeTemplateName,t.value.resumeTemplateContent),alert("更新成功")):(await Q(t.value.resumeTemplateName,t.value.resumeTemplateContent),alert("创建成功")),m.value=!1,g()}catch{alert(b.value?"更新失败":"创建失败")}};Z(()=>{g()});const C=()=>{m.value=!1};return(s,l)=>(i(),d("div",A,[e("div",{class:"flex justify-between items-center mb-6"},[l[14]||(l[14]=e("h2",{class:"text-xl font-bold"},"简历模板管理",-1)),e("button",{class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:N}," 新增模板 ")]),e("table",H,[l[15]||(l[15]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-3 text-left border border-gray-300"},"模板名称"),e("th",{class:"p-3 text-left border border-gray-300"},"布局"),e("th",{class:"p-3 text-left border border-gray-300"},"风格"),e("th",{class:"p-3 text-left border border-gray-300"},"行业"),e("th",{class:"p-3 text-left border border-gray-300"},"颜色"),e("th",{class:"p-3 text-left border border-gray-300"},"操作")])],-1)),e("tbody",null,[(i(!0),d(R,null,K(y.value,o=>(i(),d("tr",{key:o.resumeTemplateId,class:"hover:bg-gray-50"},[e("td",J,p(o.resumeTemplateName),1),e("td",X,p(o.resumeTemplateContent.layout),1),e("td",Y,p(o.resumeTemplateContent.style),1),e("td",_,p(o.resumeTemplateContent.industry),1),e("td",G,p(o.resumeTemplateContent.color),1),e("td",W,[e("button",{class:"text-blue-500 hover:text-blue-700 mr-3",onClick:j=>M(o)}," 编辑 ",8,ee),e("button",{class:"text-red-500 hover:text-red-700",onClick:j=>F(o.resumeTemplateId)}," 删除 ",8,le)])]))),128))])]),m.value?(i(),d("div",{key:0,onClick:C,class:"fixed z-14 inset-0 bg-black opacity-25",id:"black_Mask"})):T("",!0),c(D,{name:"fade-slide"},{default:P(()=>[m.value?(i(),d("div",te,[e("form",{class:"p-6 grid h-full grid-rows-[auto_1fr_auto]",onSubmit:$(I,["prevent"])},[e("h3",oe,p(f.value),1),e("div",null,[e("div",se,[e("div",null,[l[16]||(l[16]=e("label",{class:"mb-2 mr-1"},"模板名称",-1)),n(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.resumeTemplateName=o),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateName]])]),e("div",null,[l[17]||(l[17]=e("label",{class:"mb-2 mr-1"},"路径",-1)),n(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.resumeTemplateContent.folderPath=o),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.folderPath]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"mr-1"},"布局",-1)),c(k,{options:S,modelValue:t.value.resumeTemplateContent.layout,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.resumeTemplateContent.layout=o)},null,8,["modelValue"])])]),e("div",ae,[e("div",null,[l[19]||(l[19]=e("label",{class:"mb-2 mr-1"},"风格",-1)),n(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.resumeTemplateContent.style=o),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.style]])]),e("div",null,[l[20]||(l[20]=e("label",{class:"mb-2 mr-1"},"行业",-1)),n(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.resumeTemplateContent.industry=o),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.industry]])]),e("div",null,[l[21]||(l[21]=e("label",{class:"mb-2 mr-1"},"颜色",-1)),n(e("input",{"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.resumeTemplateContent.color=o),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.color]])])]),e("div",ne,[e("div",null,[l[22]||(l[22]=e("label",{class:"mb-2 mr-1"},"缩略图",-1)),e("span",{class:"border text-xs px-2 bg-gray-200 hover:bg-gray-300 cursor-pointer",onClick:l[6]||(l[6]=o=>u.value="")},"清空"),e("div",{onClick:L,class:"mt-2 w-30 h-36 border border-gray-400 flex justify-center items-center"},[u.value?(i(),d("img",{key:0,src:u.value,alt:"预览图",class:"w-full h-full object-cover object-top"},null,8,re)):(i(),d("span",ue,"+")),e("input",{ref_key:"fileInput",ref:x,type:"file",accept:"image/*",onChange:O,style:{display:"none"}},null,544)])]),e("div",de,[e("div",ie,[e("div",me,[l[23]||(l[23]=e("label",{class:"mr-1"},"主题色",-1)),n(e("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>t.value.resumeTemplateContent.setting.themeColor=o),type:"color",class:"rounded-sm focus:outline-none focus:border-blue-500"},null,512),[[r,t.value.resumeTemplateContent.setting.themeColor]])]),e("div",pe,[l[24]||(l[24]=e("label",{class:"mr-1"},"标题色",-1)),n(e("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>t.value.resumeTemplateContent.setting.fontColor=o),type:"color",class:"rounded-sm focus:outline-none focus:border-blue-500"},null,512),[[r,t.value.resumeTemplateContent.setting.fontColor]])]),e("div",null,[l[25]||(l[25]=e("label",{class:"mr-1"},"字体",-1)),c(k,{options:U,modelValue:t.value.resumeTemplateContent.setting.fontFamily,"onUpdate:modelValue":l[9]||(l[9]=o=>t.value.resumeTemplateContent.setting.fontFamily=o)},null,8,["modelValue"])]),e("div",null,[l[26]||(l[26]=e("label",{class:"mr-1"},"行间距",-1)),n(e("input",{"onUpdate:modelValue":l[10]||(l[10]=o=>t.value.resumeTemplateContent.setting.lineSpacing=o),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.lineSpacing]])]),e("div",null,[l[27]||(l[27]=e("label",{class:"mr-1"},"块间距",-1)),n(e("input",{"onUpdate:modelValue":l[11]||(l[11]=o=>t.value.resumeTemplateContent.setting.blockSpacing=o),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.blockSpacing]])]),e("div",null,[l[28]||(l[28]=e("label",{class:"mr-1"},"页边距",-1)),n(e("input",{"onUpdate:modelValue":l[12]||(l[12]=o=>t.value.resumeTemplateContent.setting.pageMargin=o),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.pageMargin]])])])])]),e("div",be,[l[29]||(l[29]=e("label",{class:"block mb-2"},"描述",-1)),n(e("textarea",{"onUpdate:modelValue":l[13]||(l[13]=o=>t.value.resumeTemplateContent.description=o),class:"w-full min-h-20 max-h-30 border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.description]])])]),e("div",{class:"flex justify-end gap-10"},[e("button",{type:"button",class:"px-4 py-2 border rounded hover:bg-gray-100",onClick:C}," 取消 "),l[30]||(l[30]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," 确定 ",-1))])],32)])):T("",!0)]),_:1})]))}});export{xe as default};
