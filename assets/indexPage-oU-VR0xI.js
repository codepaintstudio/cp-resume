import{d as R,r as o,e as W,f as i,p as M,g as c,v as G,h as e,m as oe,i as S,t as k,j as Y,F as q,q as A,l as O,w as ae,o as Q,c as ne,k as re,T as ce,x as H,y as ie,_ as ue,z as de,A as I,B as me,C as ve}from"./index-BezXkskC.js";import{c as pe,_ as J}from"./CvCard.vue_vue_type_script_setup_true_lang-FEYIb4Se.js";import{u as ge}from"./useTemplateStore-D-A3ft3P.js";import{g as he}from"./resumeTemplate-BDo-E-JI.js";const fe="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740917653869'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2874'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M460.8%20729c-71.7%200-139.1-27.9-189.9-78.6-50.7-50.7-78.6-118.1-78.6-189.9%200-71.7%2027.9-139.1%2078.6-189.9C321.5%20219.9%20389%20192%20460.8%20192c71.7%200%20139.1%2027.9%20189.9%2078.6%2050.7%2050.7%2078.6%20118.1%2078.6%20189.9%200%2071.7-27.9%20139.1-78.6%20189.9-50.8%2050.8-118.2%2078.6-189.9%2078.6z%20m0-482.7c-57.2%200-111%2022.3-151.5%2062.8s-62.8%2094.3-62.8%20151.5%2022.3%20111%2062.8%20151.5%2094.3%2062.8%20151.5%2062.8%20111-22.3%20151.5-62.8%2062.8-94.3%2062.8-151.5-22.3-111-62.8-151.5c-40.5-40.4-94.3-62.8-151.5-62.8z%20m0%200'%20fill='%23ffffff'%20p-id='2875'%3e%3c/path%3e%3cpath%20d='M803.6%20831.2c-6.9%200-13.9-2.6-19.1-8L612.2%20651c-10.6-10.6-10.6-27.8%200-38.4%2010.6-10.6%2027.8-10.6%2038.4%200l172.2%20172.2c10.6%2010.6%2010.6%2027.8%200%2038.4-5.3%205.3-12.3%208-19.2%208z%20m0%200'%20fill='%23ffffff'%20p-id='2876'%3e%3c/path%3e%3c/svg%3e",xe={class:"flex flex-col justify-center w-340 bg-white opacity-100 p-16 rounded-lg shadow-lg mx-auto mt-[70px]"},we={class:"mr-[8rem]"},ye=["src"],be={class:"space-y-5 mt-[50px]"},Ce={class:"text-2xl font-bold"},Te={class:"flex gap-2"},ke={class:"px-2 py-1 text-sm bg-gray-200 rounded"},_e={class:"px-2 py-1 text-sm bg-gray-200 rounded"},Ve={class:"px-2 py-1 text-sm bg-gray-200 rounded"},Le={class:"text-gray-600 text-sm color-[#595b5e]"},Se={key:1},$e={class:"mt-8"},De={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},Ie={key:0,class:"text-center my-12 pb-10 text-xl font-semibold mb-4 text-gray-500"},Me=R({__name:"CvTemplatePreview",props:{isVisible:{type:Boolean,default:!1},cvTemplate:{type:Object},cvList:{type:Array,default:()=>[]}},emits:["update:isVisible","childPrev","childNext","updateCvList"],setup(n,{emit:C}){const u=ge(),_=n,d=C,p=()=>{d("update:isVisible",!1)},x=o(null),w=()=>{x.value&&x.value.scrollIntoView({behavior:"smooth",block:"end"})},r=()=>{d("childPrev"),w()},g=()=>{d("childNext"),w()},m=s=>{d("updateCvList",s),w()},v=s=>{u.setTemplate(s),setTimeout(()=>{window.location.reload()},100)};return(s,l)=>{const y=W("RouterLink");return _.isVisible?(c(),i("div",{key:0,class:"pb-10",onClick:G(p,["self"])},[e("div",xe,[e("button",{onClick:r,class:"fixed z-10 top-1/2 left-24 w-10 h-10 bg-[url(@/assets/img/cv-template/navigate_before.webp)] bg-cover transition-transform duration-300 ease-in-out hover:scale-110 hover:-translate-y-0.5"}),e("button",{onClick:g,class:"fixed z-10 top-1/2 right-24 w-10 h-10 bg-[url(@/assets/img/cv-template/navigate_next.webp)] bg-cover transition-transform duration-300 ease-in-out hover:scale-110 hover:-translate-y-0.5"}),n.cvTemplate?(c(),i("div",{key:0,class:"flex mt-[1rem] justify-center md:flex-row items-center md:items-start gap-6 mb-10",ref_key:"detailSectionRef",ref:x},[e("div",we,[e("img",{src:n.cvTemplate.resumeTemplateContent.thumbnail||oe(pe),alt:"简历预览",class:"rounded-lg shadow-[0px_0px_15px_-5px] w-[350px]"},null,8,ye)]),e("div",be,[e("h1",Ce,k(n.cvTemplate.resumeTemplateName),1),e("div",Te,[e("span",ke,k(n.cvTemplate.resumeTemplateContent.style),1),e("span",_e,k(n.cvTemplate.resumeTemplateContent.industry),1),e("span",Ve,k(n.cvTemplate.resumeTemplateContent.color),1)]),e("p",Le,"颜色："+k(n.cvTemplate.resumeTemplateContent.color),1),S(y,{onClick:l[0]||(l[0]=T=>v(n.cvTemplate)),target:"_blank",to:`/edit/new-${n.cvTemplate.resumeTemplateId}`,class:"mt-[40px] w-[15rem] bg-blue-500 text-white px-6 py-2 rounded-md flex items-center gap-2 hover:bg-blue-600 justify-center"},{default:Y(()=>l[1]||(l[1]=[e("span",null,"使用此模板",-1),e("span",null,"→",-1)])),_:1},8,["to"]),l[2]||(l[2]=e("ul",{class:"pl-[1em]"},[e("li",{class:"list-disc text-gray-600 text-xs color-[#595b5e]"},"可自定义修改"),e("li",{class:"list-disc text-gray-600 text-xs color-[#595b5e]"},"支持导出文档、云端保存、分享转发")],-1))])],512)):(c(),i("div",Se,l[3]||(l[3]=[e("h1",{class:"h-50 text-center text-xl font-semibold mt-4"},"加载中...",-1)]))),e("div",$e,[l[5]||(l[5]=e("h2",{class:"text-xl font-semibold mb-4"},"更多推荐相似",-1)),e("div",De,[(c(!0),i(q,null,A(n.cvList,(T,N)=>(c(),O(J,{key:T.resumeTemplateId,onClick:F=>m(n.cvList[N]),cvTemplate:T,size:"0.8"},null,8,["onClick","cvTemplate"]))),128))]),n.cvList.length?M("",!0):(c(),i("div",Ie,l[4]||(l[4]=[e("h1",null,"暂无相关推荐",-1)])))])])])):M("",!0)}}}),Ne="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1741241828817'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1917'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M232.096%20389.248a32%2032%200%200%201%2044.96-45.344l2.88%202.848L512%20607.84l232.096-261.12a32%2032%200%200%201%2041.984-5.12l3.2%202.496a32%2032%200%200%201%205.12%2041.984l-2.496%203.2-256%20288a32%2032%200%200%201-44.96%202.816l-2.88-2.848-256-288z'%20fill='%23515151'%20p-id='1918'%3e%3c/path%3e%3c/svg%3e",ze={class:"relative block"},Be={class:"h-[15rem] w-full overflow-y-scroll no-scrollbar border rounded-t-lg border-gray-300"},Pe={class:"p-2 pl-4"},Ue=["value"],je=R({__name:"MultiCheck",props:{title:{type:String,default:"选项"},options:{type:Array,default:()=>["选项1","选项2","选项3"]}},emits:["update:modelValue"],setup(n,{emit:C}){const u=n,_=C,d=o(!1),p=o([]),x=o([]),w=o(null),r=o(null),g=()=>{p.value=[],_("update:modelValue",p.value)};ae(p,v=>{x.value=v});const m=v=>{var l,y;const s=v.target;!((l=w.value)!=null&&l.contains(s))&&!((y=r.value)!=null&&y.contains(s))&&(d.value=!1,_("update:modelValue",x.value))};return Q(()=>{document.addEventListener("click",m)}),ne(()=>{document.removeEventListener("click",m)}),(v,s)=>(c(),i("div",ze,[e("button",{ref_key:"trigger",ref:w,onClick:s[0]||(s[0]=l=>d.value=!d.value),class:"flex h-[2.5rem] items-center border border-gray-300 px-4 py-2 rounded-md bg-white shadow-sm hover:bg-gray-100"},[re(k(n.title)+" ",1),s[3]||(s[3]=e("img",{src:Ne,alt:"",class:"h-full ml-[8px]"},null,-1))],512),S(ce,{name:"fade-slide"},{default:Y(()=>[d.value?(c(),i("div",{key:0,ref_key:"dropdown",ref:r,class:"absolute left-0 w-48 bg-white shadow-md rounded-lg mt-2 flex flex-col items-center"},[e("div",Be,[e("div",Pe,[(c(!0),i(q,null,A(u.options,(l,y)=>(c(),i("label",{key:y,class:"flex items-center space-x-2 cursor-pointer p-2 hover:bg-gray-100"},[H(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=T=>p.value=T),value:l,class:"w-4 h-4",onClick:s[2]||(s[2]=G(()=>{},["stop"]))},null,8,Ue),[[ie,p.value]]),e("span",null,k(l),1)]))),128))])]),e("button",{onClick:G(g,["stop"]),class:"w-5/6 my-2 text-gray-800 py-2 border rounded-lg border-gray-300 hover:bg-gray-100"}," 清除 ")],512)):M("",!0)]),_:1})]))}}),E=ue(je,[["__scopeId","data-v-f1025e12"]]),Ee={key:1,class:"relative min-h-screen"},Ge={class:"mx-20 pt-12"},Oe={class:"flex justify-between items-center mb-10"},Re={class:"flex ml-2"},qe={class:"flex items-center mr-16 w-[16.2rem] h-[2.5rem] rounded-lg bg-[#3370ff]"},Ae={class:"flex justify-between flex-wrap gap-y-[1.5rem]"},Fe={key:0,class:"absolute z-8 top-0 bg-black opacity-25 w-full h-full"},Ke=R({__name:"indexPage",setup(n){const C=o(!0),u=o([]),_=o(1),d=o(10),p=o(0);Q(async()=>{x()});const x=async()=>{try{const t=await he(_.value,d.value);u.value=t.data.items,p.value=t.data.total,C.value=!1}catch{de({type:"error",message:"获取简历模板列表失败"}),C.value=!1}},w=(t,a,$,V)=>u.value.filter(f=>{const L=t!==f.resumeTemplateId,D=a===f.resumeTemplateContent.style,b=$===f.resumeTemplateContent.industry,j=V===f.resumeTemplateContent.color;return(D||b||j)&&L}),r=o(0),g=o(u==null?void 0:u.value[0]),m=o(!1),v=o(""),s=o(""),l=t=>{m.value=!m.value,g.value=h.value[t]},y=t=>{g.value=t},T=()=>{r.value>0&&r.value--,g.value=h.value[r.value]},N=()=>{r.value<h.value.length-1&&r.value++,g.value=h.value[r.value]},F=()=>{window.scrollTo({top:0,behavior:"smooth"})},z=o([]),B=o([]),P=o([]),K=t=>{z.value=t},X=t=>{B.value=t},Z=t=>{P.value=t},U=t=>[...new Set(u.value.map(a=>a.resumeTemplateContent[t]))],ee=I(()=>U("style")),te=I(()=>U("industry")),se=I(()=>U("color")),le=()=>{s.value=v.value.trim(),console.log(s.value)},h=I(()=>{const t=s.value.toLowerCase();return u.value.filter(a=>{const $=!s.value||a.resumeTemplateName.toLowerCase().includes(t)||a.resumeTemplateContent.style.toLowerCase().includes(t)||a.resumeTemplateContent.industry.toLowerCase().includes(t)||a.resumeTemplateContent.color.toLowerCase().includes(t),V=z.value.length===0||z.value.includes(a.resumeTemplateContent.style),f=B.value.length===0||B.value.includes(a.resumeTemplateContent.industry),L=P.value.length===0||P.value.includes(a.resumeTemplateContent.color);return $&&V&&f&&L})});return(t,a)=>{var V,f,L,D;const $=W("LoadingSpinner");return C.value?(c(),O($,{key:0})):(c(),i("div",Ee,[e("div",Ge,[e("div",Oe,[e("div",Re,[S(E,{title:"风格",options:ee.value,"onUpdate:modelValue":K,class:"mr-8"},null,8,["options"]),S(E,{title:"行业",options:te.value,"onUpdate:modelValue":X,class:"mr-8"},null,8,["options"]),S(E,{title:"颜色",options:se.value,"onUpdate:modelValue":Z},null,8,["options"])]),e("div",qe,[H(e("input",{"onUpdate:modelValue":a[0]||(a[0]=b=>v.value=b),type:"text",placeholder:"搜索简历模板",class:"flex-1 pl-[1.2rem] h-full bg-white border rounded-lg focus:outline-none focus:border-blue-500"},null,512),[[me,v.value]]),e("img",{src:fe,class:"h-full inline-block cursor-pointer transition-all duration-200 active:scale-90 hover:scale-105 hover:rotate-6",alt:"搜索",onClick:le})])]),e("div",Ae,[(c(!0),i(q,null,A(h.value,(b,j)=>(c(),O(J,{key:b.resumeTemplateId,cvTemplate:b,onClick:We=>l(j)},null,8,["cvTemplate","onClick"]))),128)),a[2]||(a[2]=ve('<i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i>',5))])]),m.value?(c(),i("div",Fe)):M("",!0),S(Me,{class:"fixed overflow-auto overscroll-contain no-scrollbar h-full z-9 top-0 left-0 right-0",cvTemplate:g.value,"cv-list":w((V=h.value[r.value])==null?void 0:V.resumeTemplateId,(f=h.value[r.value])==null?void 0:f.resumeTemplateContent.style,(L=h.value[r.value])==null?void 0:L.resumeTemplateContent.industry,(D=h.value[r.value])==null?void 0:D.resumeTemplateContent.color),isVisible:m.value,"onUpdate:isVisible":a[1]||(a[1]=b=>m.value=b),onChildNext:N,onChildPrev:T,onUpdateCvList:y},null,8,["cvTemplate","cv-list","isVisible"]),e("button",{onClick:F,class:"fixed bottom-8 right-22 w-12 h-12 bg-[url(@/assets/img/cv-template/top.webp)] bg-cover rounded-full flex items-center justify-center hover:shadow-lg transition-shadow !rounded-button whitespace-nowrap"})]))}}});export{Ke as default};
