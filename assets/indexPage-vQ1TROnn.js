import{d as G,r as a,c as u,i as M,s as E,b as e,u as se,e as S,t as T,g as le,f as q,F as O,p as R,h as F,m as c,w as oe,o as W,a as ae,l as ne,T as re,v as Y,x as ce,_ as ie,y as I,z as ue,A as de}from"./index-CMwTFN8X.js";import{c as me,_ as Q}from"./CvCard.vue_vue_type_script_setup_true_lang-CQflSwRg.js";import{u as ve}from"./useTemplateStore-CsvGxZpm.js";import{g as pe}from"./resumeTemplate-CTOuOQa3.js";import"./request-BEeji1y4.js";const he="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740917653869'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2874'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M460.8%20729c-71.7%200-139.1-27.9-189.9-78.6-50.7-50.7-78.6-118.1-78.6-189.9%200-71.7%2027.9-139.1%2078.6-189.9C321.5%20219.9%20389%20192%20460.8%20192c71.7%200%20139.1%2027.9%20189.9%2078.6%2050.7%2050.7%2078.6%20118.1%2078.6%20189.9%200%2071.7-27.9%20139.1-78.6%20189.9-50.8%2050.8-118.2%2078.6-189.9%2078.6z%20m0-482.7c-57.2%200-111%2022.3-151.5%2062.8s-62.8%2094.3-62.8%20151.5%2022.3%20111%2062.8%20151.5%2094.3%2062.8%20151.5%2062.8%20111-22.3%20151.5-62.8%2062.8-94.3%2062.8-151.5-22.3-111-62.8-151.5c-40.5-40.4-94.3-62.8-151.5-62.8z%20m0%200'%20fill='%23ffffff'%20p-id='2875'%3e%3c/path%3e%3cpath%20d='M803.6%20831.2c-6.9%200-13.9-2.6-19.1-8L612.2%20651c-10.6-10.6-10.6-27.8%200-38.4%2010.6-10.6%2027.8-10.6%2038.4%200l172.2%20172.2c10.6%2010.6%2010.6%2027.8%200%2038.4-5.3%205.3-12.3%208-19.2%208z%20m0%200'%20fill='%23ffffff'%20p-id='2876'%3e%3c/path%3e%3c/svg%3e",ge={class:"flex flex-col justify-center w-340 bg-white opacity-100 p-16 rounded-lg shadow-lg mx-auto mt-[70px]"},fe={class:"mr-[8rem]"},xe=["src"],we={class:"space-y-5 mt-[50px]"},ye={class:"text-2xl font-bold"},be={class:"flex gap-2"},Ce={class:"px-2 py-1 text-sm bg-gray-200 rounded"},Te={class:"px-2 py-1 text-sm bg-gray-200 rounded"},ke={class:"px-2 py-1 text-sm bg-gray-200 rounded"},_e={class:"text-gray-600 text-sm color-[#595b5e]"},Ve={key:1},Le={class:"mt-8"},Se={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},$e={key:0,class:"text-center my-12 pb-10 text-xl font-semibold mb-4 text-gray-500"},De=G({__name:"CvTemplatePreview",props:{isVisible:{type:Boolean,default:!1},cvTemplate:{type:Object},cvList:{type:Array,default:()=>[]}},emits:["update:isVisible","childPrev","childNext","updateCvList"],setup(n,{emit:i}){const $=ve(),k=n,d=i,p=()=>{d("update:isVisible",!1)},x=a(null),r=()=>{x.value&&x.value.scrollIntoView({behavior:"smooth",block:"end"})},v=()=>{d("childPrev"),r()},h=()=>{d("childNext"),r()},w=l=>{d("updateCvList",l),r()},m=l=>{$.setTemplate(l)};return(l,s)=>{const y=le("RouterLink");return k.isVisible?(c(),u("div",{key:0,class:"pb-10",onClick:E(p,["self"])},[e("div",ge,[e("button",{onClick:v,class:"fixed z-10 top-1/2 left-24 w-10 h-10 bg-[url(@/assets/img/cv-template/navigate_before.webp)] bg-cover transition-transform duration-300 ease-in-out hover:scale-110 hover:-translate-y-0.5"}),e("button",{onClick:h,class:"fixed z-10 top-1/2 right-24 w-10 h-10 bg-[url(@/assets/img/cv-template/navigate_next.webp)] bg-cover transition-transform duration-300 ease-in-out hover:scale-110 hover:-translate-y-0.5"}),n.cvTemplate?(c(),u("div",{key:0,class:"flex mt-[1rem] justify-center md:flex-row items-center md:items-start gap-6 mb-10",ref_key:"detailSectionRef",ref:x},[e("div",fe,[e("img",{src:n.cvTemplate.resumeTemplateContent.thumbnail||se(me),alt:"简历预览",class:"rounded-lg shadow-[0px_0px_15px_-5px] w-[350px]"},null,8,xe)]),e("div",we,[e("h1",ye,T(n.cvTemplate.resumeTemplateName),1),e("div",be,[e("span",Ce,T(n.cvTemplate.resumeTemplateContent.style),1),e("span",Te,T(n.cvTemplate.resumeTemplateContent.industry),1),e("span",ke,T(n.cvTemplate.resumeTemplateContent.color),1)]),e("p",_e,"颜色："+T(n.cvTemplate.resumeTemplateContent.color),1),S(y,{onClick:s[0]||(s[0]=C=>m(n.cvTemplate)),to:`/edit/new-${n.cvTemplate.resumeTemplateId}`,class:"mt-[40px] w-[15rem] bg-blue-500 text-white px-6 py-2 rounded-md flex items-center gap-2 hover:bg-blue-600 justify-center"},{default:q(()=>s[1]||(s[1]=[e("span",null,"使用此模板",-1),e("span",null,"→",-1)])),_:1},8,["to"]),s[2]||(s[2]=e("ul",{class:"pl-[1em]"},[e("li",{class:"list-disc text-gray-600 text-xs color-[#595b5e]"},"可自定义修改"),e("li",{class:"list-disc text-gray-600 text-xs color-[#595b5e]"},"支持导出文档、云端保存、分享转发")],-1))])],512)):(c(),u("div",Ve,s[3]||(s[3]=[e("h1",{class:"h-50 text-center text-xl font-semibold mt-4"},"加载中...",-1)]))),e("div",Le,[s[5]||(s[5]=e("h2",{class:"text-xl font-semibold mb-4"},"更多推荐相似",-1)),e("div",Se,[(c(!0),u(O,null,R(n.cvList,(C,N)=>(c(),F(Q,{key:C.resumeTemplateId,onClick:D=>w(n.cvList[N]),cvTemplate:C,size:"0.8"},null,8,["onClick","cvTemplate"]))),128))]),n.cvList.length?M("",!0):(c(),u("div",$e,s[4]||(s[4]=[e("h1",null,"暂无相关推荐",-1)])))])])])):M("",!0)}}}),Ie="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1741241828817'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1917'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M232.096%20389.248a32%2032%200%200%201%2044.96-45.344l2.88%202.848L512%20607.84l232.096-261.12a32%2032%200%200%201%2041.984-5.12l3.2%202.496a32%2032%200%200%201%205.12%2041.984l-2.496%203.2-256%20288a32%2032%200%200%201-44.96%202.816l-2.88-2.848-256-288z'%20fill='%23515151'%20p-id='1918'%3e%3c/path%3e%3c/svg%3e",Me={class:"relative block"},Ne={class:"h-[15rem] w-full overflow-y-scroll no-scrollbar border rounded-t-lg border-gray-300"},ze={class:"p-2 pl-4"},Pe=["value"],Ue=G({__name:"MultiCheck",props:{title:{type:String,default:"选项"},options:{type:Array,default:()=>["选项1","选项2","选项3"]}},emits:["update:modelValue"],setup(n,{emit:i}){const $=n,k=i,d=a(!1),p=a([]),x=a([]),r=a(null),v=a(null),h=()=>{p.value=[],k("update:modelValue",p.value)};oe(p,m=>{x.value=m});const w=m=>{var s,y;const l=m.target;!((s=r.value)!=null&&s.contains(l))&&!((y=v.value)!=null&&y.contains(l))&&(d.value=!1,k("update:modelValue",x.value))};return W(()=>{document.addEventListener("click",w)}),ae(()=>{document.removeEventListener("click",w)}),(m,l)=>(c(),u("div",Me,[e("button",{ref_key:"trigger",ref:r,onClick:l[0]||(l[0]=s=>d.value=!d.value),class:"flex h-[2.5rem] items-center border border-gray-300 px-4 py-2 rounded-md bg-white shadow-sm hover:bg-gray-100"},[ne(T(n.title)+" ",1),l[3]||(l[3]=e("img",{src:Ie,alt:"",class:"h-full ml-[8px]"},null,-1))],512),S(re,{name:"fade-slide"},{default:q(()=>[d.value?(c(),u("div",{key:0,ref_key:"dropdown",ref:v,class:"absolute left-0 w-48 bg-white shadow-md rounded-lg mt-2 flex flex-col items-center"},[e("div",Ne,[e("div",ze,[(c(!0),u(O,null,R($.options,(s,y)=>(c(),u("label",{key:y,class:"flex items-center space-x-2 cursor-pointer p-2 hover:bg-gray-100"},[Y(e("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=C=>p.value=C),value:s,class:"w-4 h-4",onClick:l[2]||(l[2]=E(()=>{},["stop"]))},null,8,Pe),[[ce,p.value]]),e("span",null,T(s),1)]))),128))])]),e("button",{onClick:E(h,["stop"]),class:"w-5/6 my-2 text-gray-800 py-2 border rounded-lg border-gray-300 hover:bg-gray-100"}," 清除 ")],512)):M("",!0)]),_:1})]))}}),j=ie(Ue,[["__scopeId","data-v-f1025e12"]]),Be={class:"relative min-h-screen"},je={class:"mx-20 pt-12"},Ee={class:"flex justify-between items-center mb-10"},Ge={class:"flex ml-2"},Oe={class:"flex items-center mr-16 w-[16.2rem] h-[2.5rem] rounded-lg bg-[#3370ff]"},Re={class:"flex justify-between flex-wrap gap-y-[1.5rem]"},Ae={key:0,class:"absolute z-8 top-0 bg-black opacity-25 w-full h-full"},He=G({__name:"indexPage",setup(n){const i=a([]),$=a(1),k=a(10),d=a(0);W(async()=>{p()});const p=async()=>{try{const t=await pe($.value,k.value);i.value=t.data.items,d.value=t.data.total,console.log(i.value)}catch{alert("获取模板列表失败")}},x=(t,o,_,V)=>i.value.filter(f=>{const L=t!==f.resumeTemplateId,b=o===f.resumeTemplateContent.style,B=_===f.resumeTemplateContent.industry,A=V===f.resumeTemplateContent.color;return(b||B||A)&&L}),r=a(0),v=a(i==null?void 0:i.value[0]),h=a(!1),w=a(""),m=a(""),l=t=>{h.value=!h.value,v.value=g.value[t]},s=t=>{v.value=t},y=()=>{r.value>0&&r.value--,v.value=g.value[r.value]},C=()=>{r.value<g.value.length-1&&r.value++,v.value=g.value[r.value]},N=()=>{window.scrollTo({top:0,behavior:"smooth"})},D=a([]),z=a([]),P=a([]),H=t=>{D.value=t},J=t=>{z.value=t},K=t=>{P.value=t},U=t=>[...new Set(i.value.map(o=>o.resumeTemplateContent[t]))],X=I(()=>U("style")),Z=I(()=>U("industry")),ee=I(()=>U("color")),te=()=>{m.value=w.value.trim(),console.log(m.value)},g=I(()=>{const t=m.value.toLowerCase();return i.value.filter(o=>{const _=!m.value||o.resumeTemplateName.toLowerCase().includes(t)||o.resumeTemplateContent.style.toLowerCase().includes(t)||o.resumeTemplateContent.industry.toLowerCase().includes(t)||o.resumeTemplateContent.color.toLowerCase().includes(t),V=D.value.length===0||D.value.includes(o.resumeTemplateContent.style),f=z.value.length===0||z.value.includes(o.resumeTemplateContent.industry),L=P.value.length===0||P.value.includes(o.resumeTemplateContent.color);return _&&V&&f&&L})});return(t,o)=>{var _,V,f,L;return c(),u("div",Be,[e("div",je,[e("div",Ee,[e("div",Ge,[S(j,{title:"风格",options:X.value,"onUpdate:modelValue":H,class:"mr-8"},null,8,["options"]),S(j,{title:"行业",options:Z.value,"onUpdate:modelValue":J,class:"mr-8"},null,8,["options"]),S(j,{title:"颜色",options:ee.value,"onUpdate:modelValue":K},null,8,["options"])]),e("div",Oe,[Y(e("input",{"onUpdate:modelValue":o[0]||(o[0]=b=>w.value=b),type:"text",placeholder:"搜索简历模板",class:"flex-1 pl-[1.2rem] h-full bg-white border rounded-lg focus:outline-none focus:border-blue-500"},null,512),[[ue,w.value]]),e("img",{src:he,class:"h-full inline-block cursor-pointer transition-all duration-200 active:scale-90 hover:scale-105 hover:rotate-6",alt:"搜索",onClick:te})])]),e("div",Re,[(c(!0),u(O,null,R(g.value,(b,B)=>(c(),F(Q,{key:b.resumeTemplateId,cvTemplate:b,onClick:A=>l(B)},null,8,["cvTemplate","onClick"]))),128)),o[2]||(o[2]=de('<i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i><i class="w-[279px]"></i>',5))])]),h.value?(c(),u("div",Ae)):M("",!0),S(De,{class:"fixed overflow-auto overscroll-contain no-scrollbar h-full z-9 top-0 left-0 right-0",cvTemplate:v.value,"cv-list":x((_=g.value[r.value])==null?void 0:_.resumeTemplateId,(V=g.value[r.value])==null?void 0:V.resumeTemplateContent.style,(f=g.value[r.value])==null?void 0:f.resumeTemplateContent.industry,(L=g.value[r.value])==null?void 0:L.resumeTemplateContent.color),isVisible:h.value,"onUpdate:isVisible":o[1]||(o[1]=b=>h.value=b),onChildNext:C,onChildPrev:y,onUpdateCvList:s},null,8,["cvTemplate","cv-list","isVisible"]),e("button",{onClick:N,class:"fixed bottom-8 right-22 w-12 h-12 bg-[url(@/assets/img/cv-template/top.webp)] bg-cover rounded-full flex items-center justify-center hover:shadow-lg transition-shadow !rounded-button whitespace-nowrap"})])}}});export{He as default};
