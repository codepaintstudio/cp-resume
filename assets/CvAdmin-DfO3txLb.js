import{d as K,r as o,b as P,o as q,e as $,f as m,m as E,g as d,h as e,l as Q,p as x,i as C,F as _,q as A,j as H,v as J,t as b,x as n,B as r,T as X,z as v,D as Y}from"./index-BAR3ZXnG.js";import{g as G,u as W,a as ee,c as le,d as te}from"./resumeTemplate-DMjv-JWp.js";import{_ as h}from"./SingleSelect.vue_vue_type_script_setup_true_lang-DQfhz3zR.js";const se={key:0,class:"text-2xl flex justify-center items-center"},ae={key:1,class:"p-6 bg-white rounded-lg min-h-[500px]"},oe={class:"w-full border-collapse border border-gray-300"},ne={class:"p-3 border border-gray-300"},re={class:"p-3 border border-gray-300"},ue={class:"p-3 border border-gray-300"},de={class:"p-3 border border-gray-300"},ie={class:"p-3 border border-gray-300"},me={class:"p-3 border border-gray-300"},pe=["onClick"],be=["onClick"],ve={key:0,class:"fixed z-20 w-280 h-170 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white shadow-[0px_0px_15px_-5px] p-3 rounded-sm"},fe={class:"text-lg font-semibold mb-4"},ce={class:"flex space-x-30"},ge={class:"flex space-x-30 mt-10"},ye={class:"mt-5 flex justify-center items-center space-x-30"},xe=["src"],Ce={key:1,class:"text-gray-400 text-4xl font-bold"},Te={class:"mt-10"},ke={class:"grid grid-cols-3 gap-y-5 gap-x-3"},we={class:"flex items-center"},he={class:"flex items-center"},Se={class:"mt-10"},Me=K({__name:"CvAdmin",setup(Ve){const u=o(!0),S=P(),T=o([]),V=o(1),U=o(10),L=o(0),O=[{label:"经典",value:"classical"},{label:"双栏",value:"doubly"}],M=[{value:"",label:"默认"},{value:"zql",label:"ZQL"},{value:"SimSun",label:"宋体"},{value:"KaiTi",label:"楷体"},{value:"ZCOOLKuaiLe-Regular",label:"ZCOOLKuaiLe-Regular"},{value:"ZhiMangXing-Regular",label:"ZhiMangXing-Regular"},{value:"ZCOOL QingKe HuangYou",label:"ZCOOL QingKe HuangYou"}],p=o(!1),c=o(""),g=o(!1),i=o(""),f=o(null),k=o(null),N=()=>{var a;(a=k.value)==null||a.click()},j=a=>{const l=a.target.files;l&&l[0]&&(f.value=l[0],i.value=URL.createObjectURL(f.value))},t=o({resumeTemplateId:"",resumeTemplateName:"",resumeTemplateContent:{description:"",folderPath:"",thumbnail:"",layout:"classical",style:"简约",industry:"互联网",color:"蓝色",setting:{themeColor:"#2b7fff",fontColor:"#ffffff",fontFamily:"zql",lineSpacing:"21",blockSpacing:"21",pageMargin:"21"}}}),y=async()=>{try{const a=await G(V.value,U.value);T.value=a.data.items,L.value=a.data.total,u.value=!1}catch{u.value=!1,v({type:"error",message:"获取模板列表失败"})}},F=()=>{g.value=!1,c.value="新增模板",p.value=!0,i.value="",f.value=null,t.value={resumeTemplateId:"",resumeTemplateName:"",resumeTemplateContent:{description:"",folderPath:"",thumbnail:"",layout:"classical",style:"简约",industry:"互联网",color:"蓝色",setting:{themeColor:"#2b7fff",fontColor:"#ffffff",fontFamily:"zql",lineSpacing:"21",blockSpacing:"21",pageMargin:"21"}}}},I=a=>{g.value=!0,c.value="编辑模板",p.value=!0,t.value=JSON.parse(JSON.stringify(a)),i.value=t.value.resumeTemplateContent.thumbnail},z=async a=>{try{u.value=!0,await te(a),u.value=!1,v({type:"success",message:"删除成功"}),y()}catch{u.value=!1,v({type:"error",message:"删除失败"})}};async function Z(a){try{await Y({message:"确定要删除吗？"}),await z(a)}catch{console.log("用户取消了操作")}}const D=async()=>{u.value=!0;try{if(g.value){if(i.value!==t.value.resumeTemplateContent.thumbnail){if(!i.value)t.value.resumeTemplateContent.thumbnail="";else if(f.value){let a=await W(f.value);t.value.resumeTemplateContent.thumbnail="https://cp-center-server.hub.feashow.cn"+a.data.url}}await ee(t.value.resumeTemplateId,t.value.resumeTemplateName,t.value.resumeTemplateContent),u.value=!1,v({type:"success",message:"更新成功"})}else await le(t.value.resumeTemplateName,t.value.resumeTemplateContent),u.value=!1,v({type:"success",message:"创建成功"});p.value=!1,y()}catch{u.value=!1,v({type:"error",message:"操作失败"})}};q(()=>{y()});const w=()=>{p.value=!1};return(a,l)=>{const R=$("LoadingSpinner");return E(S).userId!=="3"?(d(),m("div",se,l[14]||(l[14]=[e("h1",{class:"text-2xl text-red-500"},"您不是管理员，无权管理！",-1)]))):(d(),m("div",ae,[e("div",{class:"flex justify-between items-center mb-6"},[l[15]||(l[15]=e("h2",{class:"text-xl font-bold"},"简历模板管理",-1)),e("button",{class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:F}," 新增模板 ")]),u.value?(d(),Q(R,{key:0})):x("",!0),e("table",oe,[l[16]||(l[16]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-3 text-left border border-gray-300"},"模板名称"),e("th",{class:"p-3 text-left border border-gray-300"},"布局"),e("th",{class:"p-3 text-left border border-gray-300"},"风格"),e("th",{class:"p-3 text-left border border-gray-300"},"行业"),e("th",{class:"p-3 text-left border border-gray-300"},"颜色"),e("th",{class:"p-3 text-left border border-gray-300"},"操作")])],-1)),e("tbody",null,[(d(!0),m(_,null,A(T.value,s=>(d(),m("tr",{key:s.resumeTemplateId,class:"hover:bg-gray-50"},[e("td",ne,b(s.resumeTemplateName),1),e("td",re,b(s.resumeTemplateContent.layout),1),e("td",ue,b(s.resumeTemplateContent.style),1),e("td",de,b(s.resumeTemplateContent.industry),1),e("td",ie,b(s.resumeTemplateContent.color),1),e("td",me,[e("button",{class:"text-blue-500 hover:text-blue-700 mr-3",onClick:B=>I(s)}," 编辑 ",8,pe),e("button",{class:"text-red-500 hover:text-red-700",onClick:B=>Z(s.resumeTemplateId)}," 删除 ",8,be)])]))),128))])]),p.value?(d(),m("div",{key:1,onClick:w,class:"fixed z-14 inset-0 bg-black opacity-25",id:"black_Mask"})):x("",!0),C(X,{name:"fade-slide"},{default:H(()=>[p.value?(d(),m("div",ve,[e("form",{class:"p-6 grid h-full grid-rows-[auto_1fr_auto]",onSubmit:J(D,["prevent"])},[e("h3",fe,b(c.value),1),e("div",null,[e("div",ce,[e("div",null,[l[17]||(l[17]=e("label",{class:"mb-2 mr-1"},"模板名称",-1)),n(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.resumeTemplateName=s),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateName]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"mb-2 mr-1"},"路径",-1)),n(e("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.resumeTemplateContent.folderPath=s),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.folderPath]])]),e("div",null,[l[19]||(l[19]=e("label",{class:"mr-1"},"布局",-1)),C(h,{options:O,modelValue:t.value.resumeTemplateContent.layout,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.resumeTemplateContent.layout=s)},null,8,["modelValue"])])]),e("div",ge,[e("div",null,[l[20]||(l[20]=e("label",{class:"mb-2 mr-1"},"风格",-1)),n(e("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.resumeTemplateContent.style=s),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.style]])]),e("div",null,[l[21]||(l[21]=e("label",{class:"mb-2 mr-1"},"行业",-1)),n(e("input",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.resumeTemplateContent.industry=s),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.industry]])]),e("div",null,[l[22]||(l[22]=e("label",{class:"mb-2 mr-1"},"颜色",-1)),n(e("input",{"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.resumeTemplateContent.color=s),class:"border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.color]])])]),e("div",ye,[e("div",null,[l[23]||(l[23]=e("label",{class:"mb-2 mr-1"},"缩略图",-1)),e("span",{class:"border text-xs px-2 bg-gray-200 hover:bg-gray-300 cursor-pointer",onClick:l[6]||(l[6]=s=>i.value="")},"清空"),e("div",{onClick:N,class:"mt-2 w-30 h-36 border border-gray-400 flex justify-center items-center"},[i.value?(d(),m("img",{key:0,src:i.value,alt:"预览图",class:"w-full h-full object-cover object-top"},null,8,xe)):(d(),m("span",Ce,"+")),e("input",{ref_key:"fileInput",ref:k,type:"file",accept:"image/*",onChange:j,style:{display:"none"}},null,544)])]),e("div",Te,[e("div",ke,[e("div",we,[l[24]||(l[24]=e("label",{class:"mr-1"},"主题色",-1)),n(e("input",{"onUpdate:modelValue":l[7]||(l[7]=s=>t.value.resumeTemplateContent.setting.themeColor=s),type:"color",class:"rounded-sm focus:outline-none focus:border-blue-500"},null,512),[[r,t.value.resumeTemplateContent.setting.themeColor]])]),e("div",he,[l[25]||(l[25]=e("label",{class:"mr-1"},"标题色",-1)),n(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>t.value.resumeTemplateContent.setting.fontColor=s),type:"color",class:"rounded-sm focus:outline-none focus:border-blue-500"},null,512),[[r,t.value.resumeTemplateContent.setting.fontColor]])]),e("div",null,[l[26]||(l[26]=e("label",{class:"mr-1"},"字体",-1)),C(h,{options:M,modelValue:t.value.resumeTemplateContent.setting.fontFamily,"onUpdate:modelValue":l[9]||(l[9]=s=>t.value.resumeTemplateContent.setting.fontFamily=s)},null,8,["modelValue"])]),e("div",null,[l[27]||(l[27]=e("label",{class:"mr-1"},"行间距",-1)),n(e("input",{"onUpdate:modelValue":l[10]||(l[10]=s=>t.value.resumeTemplateContent.setting.lineSpacing=s),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.lineSpacing]])]),e("div",null,[l[28]||(l[28]=e("label",{class:"mr-1"},"块间距",-1)),n(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>t.value.resumeTemplateContent.setting.blockSpacing=s),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.blockSpacing]])]),e("div",null,[l[29]||(l[29]=e("label",{class:"mr-1"},"页边距",-1)),n(e("input",{"onUpdate:modelValue":l[12]||(l[12]=s=>t.value.resumeTemplateContent.setting.pageMargin=s),type:"number",min:"0",max:"50",class:"border w-25 border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4",placeholder:"21"},null,512),[[r,t.value.resumeTemplateContent.setting.pageMargin]])])])])]),e("div",Se,[l[30]||(l[30]=e("label",{class:"block mb-2"},"描述",-1)),n(e("textarea",{"onUpdate:modelValue":l[13]||(l[13]=s=>t.value.resumeTemplateContent.description=s),class:"w-full min-h-20 max-h-30 border border-gray-400 rounded-sm focus:outline-none focus:border-blue-500 py-1.5 px-4"},null,512),[[r,t.value.resumeTemplateContent.description]])])]),e("div",{class:"flex justify-end gap-10"},[e("button",{type:"button",class:"px-4 py-2 border rounded hover:bg-gray-100",onClick:w}," 取消 "),l[31]||(l[31]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," 确定 ",-1))])],32)])):x("",!0)]),_:1})]))}}});export{Me as default};
