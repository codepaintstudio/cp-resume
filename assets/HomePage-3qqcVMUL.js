import{j as oe,C as ne,r as l,f as j,u as re,q as ue,k as v,l as a,s as y,x as V,A as L,p as t,F,N as S,M as c,L as N,v as $,R as P}from"./vendor-BQcZEzZR.js";import{_ as U}from"./CvCard.vue_vue_type_script_setup_true_lang-D5KWr1zD.js";import{_ as ie}from"./CvTemplatePreview.vue_vue_type_script_setup_true_lang-DuxhJ7Wx.js";import{u as ve,s as B,g as ce}from"./index-D-9_l-Mc.js";import{g as me}from"./resumeTemplate-DD_MMBNP.js";import{s as A}from"./tool-hpifTAZt.js";import{c as pe}from"./createLucideIcon-DF0aFyqq.js";import"./useTemplateStore-DldKuVnS.js";/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=pe("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ge={id:"relative w-screen h-full bg-white flex"},fe={key:1,class:"w-full flex flex-col justify-center items-center z-10"},we={class:"w-[70%] h-[70vh] flex flex-col justify-center items-center relative z-10"},he={class:"w-full flex justify-around items-center mt-6 mb-10"},be={class:"w-[70%] h-[60vh] flex flex-col justify-center items-center relative z-10"},ye={key:0,class:"w-full flex justify-center items-center gap-4 mt-10 mb-10"},xe={key:1},ke={class:"text-center"},Ce={key:2,class:"fixed z-[1000] top-0 left-0 w-full h-full bg-black opacity-25"},Fe=oe({__name:"HomePage",setup(Te){const _=ne(),x=ve(),k=l([]),q=l(0),C=l(!0),E=l(1),D=l(5),r=l([]),G=l(0),R=l(!0),J=l(1),K=l(1e4),u=l(0),n=l(),p=l(!1),T=l(!0),d=j(()=>k.value.slice(0,5)),O=j(()=>r.value.slice(0,5)),M=()=>{_.push("/cv")},Q=async()=>{try{const s=await me(E.value,D.value);k.value=s.data.items,q.value=s.data.total,C.value=!1}catch{B({type:"error",message:"获取简历模板列表失败"}),C.value=!1}},W=l(null),z=s=>{W.value=s},X=(s,e)=>({resumeTemplateName:s,resumeTemplateContent:{folderPath:"",thumbnail:e,style:"风格",industry:"行业",color:"颜色"}}),Y=async()=>{try{const s=await ce(J.value,K.value);r.value=s.data.items,r.value=r.value.filter(e=>String(e.resumeUserId)===x.userId),G.value=r.value.length,R.value=!1}catch{R.value=!1,B({type:"error",message:"获取简历列表失败"})}},Z=async(s,e=!1)=>{T.value=!e,u.value=s,p.value=!0},ee=s=>{n.value=s},te=()=>{u.value>0&&(u.value--,n.value=d.value[u.value])},se=()=>{const s=d.value.length-1;u.value<s&&(u.value++,n.value=d.value[u.value])},le=(s,e,I,g)=>T.value?k.value.filter(i=>{const f=s!==i.resumeTemplateId,w=e===i.resumeTemplateContent.style,h=I===i.resumeTemplateContent.industry,b=g===i.resumeTemplateContent.color;return(w||h||b)&&f}):[],ae=s=>{_.push(`/edit/resume-${s}`)};return re(()=>{Q(),Y()}),(s,e)=>{var g,i,f,w,h,b,H;const I=ue("LoadingSpinner");return a(),v("div",ge,[C.value?(a(),y(I,{key:0})):(a(),v("div",fe,[t("div",{class:"w-[60%] h-[60vh] z-10 flex flex-col justify-center items-center relative"},[t("div",{class:"relative w-full h-[15vw]"},[e[3]||(e[3]=t("div",{class:"absolute text-[7vw]"},"CP-ResumeTools",-1)),e[4]||(e[4]=t("div",{class:"absolute right-0 bottom-[-12%] translate-y-[-200%] text-[2vw]"}," 码绘工作室简历制作 ",-1)),t("div",{class:"block w-[12vw] h-[3vw] bg-[url('@/assets/img/Home/MakeResume.png')] bg-contain bg-no-repeat absolute left-1/2 bottom-0 -translate-x-1/2 transition-all duration-200 hover:scale-105 active:scale-95 cursor-pointer",onClick:M,title:"开始制作简历"})])]),t("div",we,[e[6]||(e[6]=t("div",{class:"w-[30vw] h-[6vh] relative"},[t("span",{class:"absolute block w-[10vw] h-[4vw] bg-[url('@/assets/img/Home/Left2.png')] bg-contain bg-no-repeat left-0 top-[3vh] -translate-y-1/2"}),t("span",{class:"absolute w-[10vw] h-[4vw] left-1/2 top-[3vh] -translate-x-[40%] -translate-y-1/2 text-[2vw]"},"精选模板"),t("span",{class:"absolute block w-[10vw] h-[4vw] bg-[url('@/assets/img/Home/Right1.png')] bg-contain bg-no-repeat right-0 top-[3vh] -translate-y-1/2"})],-1)),t("div",he,[(a(!0),v(F,null,S(d.value,(o,m)=>(a(),y(U,{key:m,cvTemplate:o,"is-view":!0,size:"0.8",class:"hover:shadow-lg transition-shadow duration-300",onClick:Ie=>Z(m)},null,8,["cvTemplate","onClick"]))),128))]),t("div",{onClick:M,class:"cursor-pointer group"},e[5]||(e[5]=[t("span",{class:"block w-30 h-10 bg-[url('@/assets/img/Home/More2.png')] bg-contain bg-no-repeat transition-all duration-200 group-hover:scale-105 active:scale-95"},null,-1)]))]),t("div",be,[e[10]||(e[10]=t("div",{class:"w-[30vw] h-[6vh] relative"},[t("span",{class:"absolute block w-[10vw] h-[4vw] bg-[url('@/assets/img/Home/Left2.png')] bg-contain bg-no-repeat left-0 top-[3vh] -translate-y-1/2"}),t("span",{class:"absolute w-[10vw] h-[4vw] left-1/2 top-[3vh] -translate-x-[40%] -translate-y-1/2 text-[2vw]"},"历史简历"),t("span",{class:"absolute block w-[10vw] h-[4vw] bg-[url('@/assets/img/Home/Right1.png')] bg-contain bg-no-repeat right-0 top-[3vh] -translate-y-1/2"})],-1)),c(x).isLoggedIn&&r.value.length>0?(a(),v("div",ye,[(a(!0),v(F,null,S(O.value.slice(0,5),o=>(a(),y(U,{key:o.resumeId,cvTemplate:X(o.resumeContent.resumeTemplateName),"is-view":!1,onMouseenter:m=>z(o.resumeId),onMouseleave:e[0]||(e[0]=m=>z(null)),onClick:m=>ae(o.resumeId),size:"0.8",class:"hover:shadow-lg transition-shadow duration-300"},null,8,["cvTemplate","onMouseenter","onClick"]))),128))])):(a(),v("div",xe,[t("div",ke,[e[8]||(e[8]=N(" 暂无历史简历，点击 ")),L(c(P),{to:"/cv",class:"text-[#3370FF] hover:underline"},{default:$(()=>e[7]||(e[7]=[N("开始制作")])),_:1})])])),c(x).isLoggedIn&&r.value.length>5?(a(),y(c(P),{key:2,class:"absolute right-0 top-[20%] w-[10vw] h-[2vw] -translate-y-1/2 flex justify-center items-center flex-row group",to:"/user/cv"},{default:$(()=>e[9]||(e[9]=[t("span",{class:"block text-[1.2vw] text-[#3370FF] group-hover:underline"},"查看全部",-1),t("span",{class:"block w-[2vw] h-[2vw] bg-[url('@/assets/img/Home/arrow2.png')] bg-contain bg-no-repeat transition-transform group-hover:translate-x-1"},null,-1)])),_:1})):V("",!0)])])),p.value?(a(),v("div",Ce)):V("",!0),L(ie,{class:"fixed overflow-auto overscroll-contain no-scrollbar h-full z-[1001] top-0 left-0 right-0",cvTemplate:n.value,"cv-list":T.value?le(((g=n.value)==null?void 0:g.resumeTemplateId)||"",((f=(i=n.value)==null?void 0:i.resumeTemplateContent)==null?void 0:f.style)||"",((h=(w=n.value)==null?void 0:w.resumeTemplateContent)==null?void 0:h.industry)||"",((H=(b=n.value)==null?void 0:b.resumeTemplateContent)==null?void 0:H.color)||""):[],isVisible:p.value,"onUpdate:isVisible":e[1]||(e[1]=o=>p.value=o),onChildNext:se,onChildPrev:te,onUpdateCvList:ee},null,8,["cvTemplate","cv-list","isVisible"]),t("button",{onClick:e[2]||(e[2]=(...o)=>c(A)&&c(A)(...o)),class:"fixed w-12 h-12 bg-white rounded-full right-[10%] bottom-[5%] shadow-md flex justify-center items-center cursor-pointer hover:shadow-lg transition-all duration-300 group","aria-label":"返回顶部"},[L(c(de),{class:"text-gray-600 group-hover:text-[#3370FF] transition-colors"})])])}}});export{Fe as default};
