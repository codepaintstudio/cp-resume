import{d as D,b as T,r,o as j,z as m,e as y,f as u,g as n,h as l,l as M,p as v,t as N,F as R,q as $,i as c,j as i,T as _,k as B,D as V}from"./index-BAR3ZXnG.js";import{_ as z}from"./CvCard.vue_vue_type_script_setup_true_lang-CRK0hXW-.js";import{g as U,d as F}from"./resume-jajqJxRb.js";const P={class:"flex justify-between items-center w-[100%] h-1/8 px-6 border-b-2 border-[#D9D9D9]"},q={class:"text-lg font-semibold"},E={class:"flex flex-wrap space-x-6 space-y-5 border-gray-300 px-10 pt-4 h-7/8 no-scrollbar overflow-scroll"},H=["onMouseenter"],A={key:0,class:"absolute h-full inset-0 rounded-lg bg-black opacity-50"},G={key:0,class:"absolute inset-0 rounded-lg flex flex-col justify-center items-center space-y-2"},J=["onClick"],K={class:"w-63 h-90 flex items-center justify-center bg-gray-200 rounded cursor-pointer hover:bg-gray-300 transition-all duration-300"},Y=D({__name:"UserCv",setup(O){const h=T(),s=r([]),o=r(!0),b=r(1),x=r(10),k=r(0);j(()=>{w()});const w=async()=>{try{const e=await U(b.value,x.value);s.value=e.data.items,s.value=s.value.filter(t=>String(t.resumeUserId)===h.userId),k.value=e.data.total,o.value=!1}catch{o.value=!1,m({type:"error",message:"获取简历列表失败"})}},C=async e=>{o.value=!0;try{await F(e),s.value=s.value.filter(t=>t.resumeId!==e),o.value=!1,m({type:"success",message:"删除简历成功"})}catch{o.value=!1,m({type:"error",message:"删除简历失败"})}};async function I(e){try{await V({message:"确定要删除这份记录简历？"}),await C(e)}catch{console.log("用户取消了操作")}}const d=r(null),f=e=>{d.value=e},L=(e,t)=>({resumeTemplateName:e,resumeTemplateContent:{folderPath:"",thumbnail:t,style:"风格",industry:"行业",color:"颜色"}});return(e,t)=>{const S=y("LoadingSpinner"),p=y("RouterLink");return n(),u("div",null,[l("div",P,[l("h2",q,"我的云简历 ("+N(s.value.length)+"/10)",1)]),o.value?(n(),M(S,{key:0})):v("",!0),l("div",E,[(n(!0),u(R,null,$(s.value,a=>(n(),u("div",{key:a.resumeId,class:"relative h-90 cursor-pointer rounded-lg",onMouseenter:g=>f(a.resumeId),onMouseleave:t[0]||(t[0]=g=>f(null))},[c(z,{"is-view":!1,size:"0.9","cv-template":L(a.resumeContent.resumeTemplateName)},null,8,["cv-template"]),c(_,{name:"fade-op"},{default:i(()=>[d.value===a.resumeId?(n(),u("div",A)):v("",!0)]),_:2},1024),c(_,{name:"fade-op1"},{default:i(()=>[d.value===a.resumeId?(n(),u("div",G,[c(p,{target:"_blank",to:`/edit/resume-${a.resumeId}`,class:"px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white rounded"},{default:i(()=>t[1]||(t[1]=[B("编辑")])),_:2},1032,["to"]),l("button",{onClick:g=>I(a.resumeId),class:"px-4 py-2 bg-white hover:bg-gray-200 text-black rounded"},"删除",8,J)])):v("",!0)]),_:2},1024)],40,H))),128)),l("div",K,[c(p,{class:"block flex items-center justify-center w-full h-full",to:"/cv"},{default:i(()=>t[2]||(t[2]=[l("span",{class:"text-4xl text-gray-500"},"+",-1)])),_:1})])])])}}});export{Y as default};
